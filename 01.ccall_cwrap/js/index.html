<html>
<head>
	<title>Emscripten ccall, cwrap example</title>
</head>
<body>
	<script type="text/javascript" src="../../js/dat.gui.js"></script>
	<script type="text/javascript" src="bin/lib.js"></script>
	<script type="text/javascript">

		// 1. 소스를 임베드 한 환경이라면 window의 Module 객체로 컴파일 된다. 
		// 2. commonJS, AMD 등도 대응되어 있어 browserify, webpack 등 bundler를 통해 require('./bin/lib.js')로 사용가능하다. 
		console.log( Module );

		var gui = new dat.GUI();

		gui.add( window, "ccall" );
		gui.add( window, "cwrap" );

		function ccall(){

			// ccall 사용 예
			console.log( "ccall sumWithConst( 10 )", 
				Module.ccall( "sumWithConst", "number", [ "number" ], [10] ) 
			);

			console.log( "ccall sumAandB( 5, 5 )", 
				Module.ccall( "sumAandB", 'number', [ 'number', 'number' ], [ 5, 5 ] ) 
			);
		}

		function cwrap(){

			var sumWithConst = Module.cwrap( "sumWithConst", 'number', [ 'number' ] );
			var sumAandB = Module.cwrap( 'sumAandB', 'number', [ 'number', 'number' ] );

			console.log( "call function from cwrap.sumWithConst( 10 )", sumWithConst( 10 ) );
			console.log( "call function from cwrap.sumAandB( 5, 5 )", sumAandB( 5, 5 ) );
		}

	</script>
</body>
</html>